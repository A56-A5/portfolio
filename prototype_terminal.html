<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monochrome Terminal</title>
<style>
    body {
        margin: 0;
        background: #000;
        font-family: monospace;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
    }
    .terminal {
        width: 95vw;
        height: 95vh;
        background: #000;
        padding: 15px;
        overflow-y: auto;
        font-size: 18px;
        line-height: 1.3;
    }
    .line {
        display: flex;
        flex-wrap: wrap;
    }
    .prompt {
        margin-right: 5px;
        font-weight: bold;
    }
    .input-area {
        display: inline-block;
        white-space: pre-wrap;
        word-wrap: break-word;
    }
    .cursor {
        display: inline-block;
        width: 10px;
        background: #fff;
        animation: blink 1s infinite;
        height: 1em;
        vertical-align: text-bottom;
    }
    @keyframes blink {
        0%, 50% { opacity: 1; }
        50.01%, 100% { opacity: 0; }
    }
    .hidden {
        display: none;
    }

    /* Help output tweaks */
    .help-output {
        line-height: 1.05; /* tighter spacing */
        font-size: 16px;
        color: #fff;
        margin-top: 8px;
    }
    .cmd {
        font-weight: bold;
        text-shadow: 0 0 5px #fff, 0 0 10px #fff; /* glowing effect */
    }
    .category {
        text-decoration: underline;
        display: block;
        margin-top: 6px;
    }
    .desc {
        color: #ccc;
    }
</style>
</head>
<body>
<div class="terminal" id="terminal">
    <div id="output"></div>
    <div class="line" id="input-line">
        <span class="prompt">alvi@portfolio:~$</span>
        <span class="input-area" id="input"></span><span class="cursor"></span>
    </div>
</div>

<script>
const inputArea = document.getElementById("input");
const output = document.getElementById("output");
const terminal = document.getElementById("terminal");
const inputLine = document.getElementById("input-line");

const helpText = `
<span class="category">Core</span>
  <span class="cmd">help</span>       <span class="desc">Show this help message</span><br>
  <span class="cmd">ls</span>         <span class="desc">List available sections</span><br>
  <span class="cmd">pwd</span>        <span class="desc">Show current directory</span><br>
  <span class="cmd">clear</span>      <span class="desc">Clear terminal screen</span><br><br>
<span class="category">Portfolio</span>
  <span class="cmd">cat about</span>      <span class="desc">Open About Me section</span><br>
  <span class="cmd">cat projects</span>   <span class="desc">Open Projects section</span><br>
  <span class="cmd">cat contact</span>    <span class="desc">Open Contact section</span><br>
  <span class="cmd">cat resume</span>     <span class="desc">View Resume (PDF)</span><br><br>
<span class="category">Extras</span>
  <span class="cmd">whoami</span>         <span class="desc">Show your name & role</span><br>
  <span class="cmd">uname -a</span>       <span class="desc">Show system info</span><br>
  <span class="cmd">date</span>           <span class="desc">Show current date/time</span><br>
  <span class="cmd">theme [dark|light]</span> <span class="desc">Switch UI theme</span>
`;

const commands = {
    help: helpText,
    "cat about": "Hi, I'm Alvi! A passionate developer who loves building creative web experiences.",
    "theme light": "Theme switched to light.",
    "theme dark": "Theme switched to dark.",
};

let buffer = "";
const nextPromptDelay = 300;

document.addEventListener("keydown", function(e) {
    if (inputLine.classList.contains("hidden")) return;

    if (e.key === "Enter") {
        const cmd = buffer.trim();
        const commandLine = `<div><span class="prompt">alvi@portfolio:~$</span> ${cmd}</div>`;
        output.innerHTML += commandLine;
        inputLine.classList.add("hidden");

        if (cmd === "clear") {
            output.innerHTML = "";
            showPrompt();
        } else if (cmd === "ls") {
            typeOutput("about  projects  contact  resume", showPrompt);
        } else if (cmd === "pwd") {
            typeOutput("/home/alvi/portfolio", showPrompt);
        } else if (cmd === "date") {
            typeOutput(new Date().toString(), showPrompt);
        } else if (commands[cmd]) {
            const isHelp = cmd === "help";
            typeOutput(commands[cmd], showPrompt, isHelp);
        } else if (cmd !== "") {
            typeOutput(`Command not found: ${cmd}`, showPrompt);
        } else {
            showPrompt();
        }

        buffer = "";
        inputArea.textContent = "";
        terminal.scrollTop = terminal.scrollHeight;
        e.preventDefault();
    } else if (e.key === "Backspace") {
        buffer = buffer.slice(0, -1);
        inputArea.textContent = buffer;
        e.preventDefault();
    } else if (e.key.length === 1) {
        buffer += e.key;
        inputArea.textContent = buffer;
    }
});

function typeOutput(text, callback, isHelp = false) {
    const container = document.createElement("div");
    container.style.whiteSpace = "pre-wrap";
    if (isHelp) container.classList.add("help-output");
    output.appendChild(container);

    const parts = text.match(/<[^>]+>|[^<]+/g) || [];
    let index = 0;

    let speed;
    if (text.length > 1000) speed = 0.1;  // almost instant
    else if (text.length > 500) speed = 0.4;
    else if (text.length > 200) speed = 1;
    else speed = 4;

    function typeNext() {
        if (index >= parts.length) {
            setTimeout(callback, nextPromptDelay);
            return;
        }

        const part = parts[index];
        if (part.startsWith("<")) {
            container.innerHTML += part;
            index++;
            typeNext();
        } else {
            let charIndex = 0;
            function typeChar() {
                if (charIndex < part.length) {
                    container.innerHTML += part[charIndex];
                    charIndex++;
                    terminal.scrollTop = terminal.scrollHeight;
                    setTimeout(typeChar, speed);
                } else {
                    index++;
                    typeNext();
                }
            }
            typeChar();
        }
    }
    typeNext();
}

function showPrompt() {
    inputLine.classList.remove("hidden");
    terminal.scrollTop = terminal.scrollHeight;
}
</script>
</body>
</html>
