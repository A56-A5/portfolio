<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Draggable & Resizable Windows</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #1e1e1e;
    color: #fff;
    margin: 0;
    padding: 20px;
    overflow: hidden;
  }
  .controls {
    margin-bottom: 20px;
  }
  button {
    background: #333;
    color: white;
    border: none;
    padding: 10px 15px;
    margin-right: 10px;
    cursor: pointer;
    border-radius: 4px;
  }
  button:hover {
    background: #444;
  }

  /* Window Styles */
  .window {
    position: absolute;
    top: 100px;
    left: 100px;
    width: 350px;
    height: 250px;
    background: #181818;
    border: 1px solid #555;
    border-radius: 6px;
    display: flex;
    flex-direction: column;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
  }
  .window-header {
    background: #3a3a3a;
    padding: 8px 10px;
    cursor: move;
    display: flex;
    justify-content: space-between;
    align-items: center;
    user-select: none;
  }
  .window-header span {
    font-weight: bold;
  }
  .close-btn {
    background: transparent;
    border: none;
    color: white;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    width: 28px;
    height: 28px;
    border-radius: 4px;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background 0.2s;
  }
  .close-btn:hover {
    background: #ff4d4d;
  }
  .window-body {
    flex: 1;
    padding: 10px;
    background: #1e1e1e;
    font-size: 14px;
  }

  /* Resize handles */
  .resize-handle {
    position: absolute;
    background: transparent;
    z-index: 5;
  }
  .resize-handle.n, .resize-handle.s {
    height: 6px;
    width: 100%;
    cursor: ns-resize;
    left: 0;
  }
  .resize-handle.e, .resize-handle.w {
    width: 6px;
    height: 100%;
    cursor: ew-resize;
    top: 0;
  }
  .resize-handle.n { top: -3px; }
  .resize-handle.s { bottom: -3px; }
  .resize-handle.e { right: -3px; }
  .resize-handle.w { left: -3px; }

  .resize-handle.nw, .resize-handle.ne, .resize-handle.sw, .resize-handle.se {
    width: 10px;
    height: 10px;
    background: transparent;
    z-index: 6;
  }
  .resize-handle.nw { top: -5px; left: -5px; cursor: nwse-resize; }
  .resize-handle.ne { top: -5px; right: -5px; cursor: nesw-resize; }
  .resize-handle.sw { bottom: -5px; left: -5px; cursor: nesw-resize; }
  .resize-handle.se { bottom: -5px; right: -5px; cursor: nwse-resize; }
</style>
</head>
<body>
  <div class="controls">
    <button onclick="createWindow('Window 1')">New Window</button>
    <button onclick="createWindow('Another Window')">Another Window</button>
  </div>

<script>
let zIndex = 10;

function createWindow(title) {
  const win = document.createElement('div');
  win.className = 'window';
  win.style.top = (100 + Math.random() * 100) + 'px';
  win.style.left = (100 + Math.random() * 100) + 'px';
  win.style.zIndex = zIndex++;

  win.innerHTML = `
    <div class="window-header">
      <span>${title}</span>
      <button class="close-btn">&times;</button>
    </div>
    <div class="window-body">Content for ${title}</div>
    <div class="resize-handle n"></div>
    <div class="resize-handle s"></div>
    <div class="resize-handle e"></div>
    <div class="resize-handle w"></div>
    <div class="resize-handle nw"></div>
    <div class="resize-handle ne"></div>
    <div class="resize-handle sw"></div>
    <div class="resize-handle se"></div>
  `;

  document.body.appendChild(win);

  const header = win.querySelector('.window-header');
  const closeBtn = win.querySelector('.close-btn');

  // Close button
  closeBtn.addEventListener('click', () => win.remove());

  // Bring to front when clicked
  win.addEventListener('mousedown', () => {
    win.style.zIndex = zIndex++;
  });

  // Dragging logic
  let isDragging = false, offsetX = 0, offsetY = 0;

  header.addEventListener('mousedown', (e) => {
    isDragging = true;
    offsetX = e.clientX - win.offsetLeft;
    offsetY = e.clientY - win.offsetTop;
    document.body.style.userSelect = 'none';
  });

  document.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    win.style.left = e.clientX - offsetX + 'px';
    win.style.top = e.clientY - offsetY + 'px';
  });

  document.addEventListener('mouseup', () => {
    isDragging = false;
    document.body.style.userSelect = 'auto';
  });

  // Resizing logic
  const handles = win.querySelectorAll('.resize-handle');
  let isResizing = false, currentHandle, startX, startY, startWidth, startHeight, startTop, startLeft;

  handles.forEach(handle => {
    handle.addEventListener('mousedown', (e) => {
      e.stopPropagation();
      isResizing = true;
      currentHandle = handle.classList[1];
      startX = e.clientX;
      startY = e.clientY;
      startWidth = win.offsetWidth;
      startHeight = win.offsetHeight;
      startTop = win.offsetTop;
      startLeft = win.offsetLeft;
      document.body.style.userSelect = 'none';
    });
  });

  document.addEventListener('mousemove', (e) => {
    if (!isResizing) return;

    const dx = e.clientX - startX;
    const dy = e.clientY - startY;

    if (currentHandle.includes('e')) {
      win.style.width = startWidth + dx + 'px';
    }
    if (currentHandle.includes('s')) {
      win.style.height = startHeight + dy + 'px';
    }
    if (currentHandle.includes('w')) {
      win.style.width = startWidth - dx + 'px';
      win.style.left = startLeft + dx + 'px';
    }
    if (currentHandle.includes('n')) {
      win.style.height = startHeight - dy + 'px';
      win.style.top = startTop + dy + 'px';
    }
  });

  document.addEventListener('mouseup', () => {
    isResizing = false;
    document.body.style.userSelect = 'auto';
  });
}
</script>
</body>
</html>
